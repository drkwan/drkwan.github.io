<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<title> Card Properties </title>
	<script>
		function clean( input ) {
			return input.toLowerCase().replace( /[^a-z]/g, "" );
		}

		function pad( n, width=3, z=0 ) {
			return ( String( z ).repeat( width ) + String( n )).slice( String( n ).length );
		}

		function decode( str, preOffset, modulo, postOffset, target, padWidth ) {

			str = clean( str )

			let prime = 191;
			let sum = 0;
			for ( let i = 0; i < str.length; i++ ) {
				sum += prime * ( str.charCodeAt( i ) - "a".charCodeAt( 0 ) );
			}

			let decoded = ( sum + preOffset ) % modulo + postOffset;
			document.getElementById( target ).innerHTML = "" + pad( decoded, padWidth, 0 );
		}
	</script>
	</head>
	<body>
		<div> Mrs. Kwan's maiden name: </div>
		<input type="text" onChange="decode( this.value, 8, 12, 1, 'month', 2 )" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();"/>
		<div> Month: </div>
		<div id="month"> -- </div>
		<hr/>
		<div> City Jeff was born in: </div>
		<input type="text" onChange="decode( this.value, 33, 100, 0, 'year', 2 )" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();"/>
		<div> Year: </div>
		<div id="year"> -- </div>
		<hr/>
		<div> Stephen's sister's name: </div>
		<input type="text" onChange="decode( this.value, -6, 1000, 0, 'code', 3 )" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();"/>
		<div> Code: </div>
		<div id="code"> --- </div>
		<hr/>
		<div>
			Activate: <a href="https://www.bankofamerica.com/activate" target="_blank"> https://www.bankofamerica.com/activate </a>
			or call 1-800-276-9939
		</div>
  </body>
</html>
